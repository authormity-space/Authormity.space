generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Profile {
  id               String    @id @default(cuid())
  clerkId          String    @unique
  email            String    @unique
  name             String
  linkedinId       String?   @unique
  linkedinToken    String?
  linkedinTokenExp DateTime?
  plan             String    @default("free")
  voiceProfile     Json?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  posts            Post[]
}

model Post {
  id          String    @id @default(cuid())
  profileId   String
  profile     Profile   @relation(fields: [profileId], references: [id])
  content     String
  status      String    @default("draft")
  scheduledAt DateTime?
  publishedAt DateTime?
  platform    String    @default("linkedin")
  analytics   Json?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([profileId])
  @@index([status])
  @@index([scheduledAt])
}
